<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo</title>
</head>
<body>
<div>
    <h3>Add News</h3>
</div>
<form name="news-form">
    <p>
        <input type="hidden" name="id">
    </p>
    <p>
        <lable>Title</lable>
        <input type="text" name="title">
    </p>
    <p>
        <lable>Description</lable>
        <input type="text" name="description">
    </p>
    <p>
        <lable>Image</lable>
        <input type="text" name="image">
    </p>
    <p>
        <lable>Content</lable>
        <input type="text" name="content">
    </p>
    <p>
        <lable>Category</lable>
        <input type="text" name="category">
    </p>
    <p>
        <lable>Status</lable>
        <input type="text" name="status">
    </p>
    <input type="submit" name="submit" value="Submit">
    <input type="reset" value="Reset">
</form>
<script>
    document.addEventListener('DOMContentLoaded',function () {
        const btnSubmit = document.forms['news-form']['submit'];
        const inputTitle = document.forms['news-form']['title'];
        const inputDescription = document.forms['news-form']['description'];
        const inputImage = document.forms['news-form']['image'];
        const inputContent = document.forms['news-form']['content'];
        const inputCategory = document.forms['news-form']['category'];
        const inputStatus = document.forms['news-form']['status'];
        btnSubmit.onclick = function (e) {
            e.preventDefault();
            const objectToSend = {
                'title' : inputTitle.value,
                'description' : inputDescription.value,
                'image' : inputImage.value,
                'content' : inputContent.value,
                'category' : inputCategory.value,
                'status' : inputStatus.value,
            }
            const data = JSON.stringify(objectToSend);
            const xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200){
                    alert("OK DONE!!");
                    window.location.href = '/spring_boot1/com/example/spring_boot1/asset/news.html';
                }
            }
            xhr.open('POST','http://localhost:8080/api/v1/news',false);
            xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");
            xhr.send(data);
        }
    })
</script>
</body>
</html>